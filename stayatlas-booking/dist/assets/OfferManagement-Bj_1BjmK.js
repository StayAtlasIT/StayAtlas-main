import{I as O,b as i,j as t,G as d,H as s}from"./index-CHayuJmP.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],E=O("clipboard-copy",S),g=["from-blue-400 to-blue-600","from-red-400 to-yellow-500","from-green-400 to-emerald-600","from-purple-400 to-pink-600","from-orange-400 to-red-600","from-teal-400 to-cyan-600"],T=[{label:"Plane",value:"plane"},{label:"Wallet",value:"wallet"},{label:"Location",value:"location"},{label:"Calendar",value:"calendar"}],b={title:"",subtitle:"",description:"",validTill:"",code:"",discount:"",type:"all",gradient:g[0],icon:"plane"},I=()=>{const[o,v]=i.useState([]),[a,c]=i.useState(b),[r,h]=i.useState(!1),[j,p]=i.useState(null),[m,y]=i.useState(6),x=async()=>{try{const e=await d.get("/v1/offers");v(e.data.data)}catch(e){console.error(e),s.error("Failed to fetch offers")}};i.useEffect(()=>{x()},[]);const n=e=>{const{name:l,value:u}=e.target;c(k=>({...k,[l]:u}))},f=async e=>{e.preventDefault();try{r?(await d.put(`/v1/offers/${j}`,a),s.success("Offer updated!")):(await d.post("/v1/offers",a),s.success("Offer created!")),c(b),h(!1),p(null),x()}catch(l){console.error(l),s.error("Failed to save offer")}},w=e=>{c({title:e.title,subtitle:e.subtitle,description:e.description,validTill:e.validTill.slice(0,10),code:e.code,discount:e.discount,type:e.type,gradient:e.gradient,icon:e.icon}),h(!0),p(e._id)},N=async e=>{if(window.confirm("Are you sure you want to delete this offer?"))try{await d.delete(`/v1/offers/${e}`),s.success("Offer deleted!"),x()}catch(l){console.error(l),s.error("Failed to delete offer")}},C=e=>{navigator.clipboard.writeText(e),s.success("Copied to clipboard!")};return t.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[t.jsx("div",{className:"mb-8 text-center",children:t.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-green-700 tracking-tight",children:"Offer Management"})}),t.jsx("h2",{className:"text-2xl font-bold mb-6",children:" Create Offers"}),t.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white p-6 rounded-lg shadow-md mb-10",children:[[{label:"Title",name:"title"},{label:"Subtitle",name:"subtitle"},{label:"Description",name:"description"},{label:"Code (UNIQUE)",name:"code"},{label:"Discount",name:"discount"},{label:"Valid Till",name:"validTill",type:"date"}].map(({label:e,name:l,type:u="text"})=>t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium",children:e}),t.jsx("input",{type:u,name:l,value:a[l],onChange:n,className:"w-full border px-3 py-2 rounded mt-1",required:l!=="subtitle"})]},l)),t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium",children:"Type"}),t.jsxs("select",{name:"type",value:a.type,onChange:n,className:"w-full border px-3 py-2 rounded mt-1",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"wallet",children:"Wallet"}),t.jsx("option",{value:"stay",children:"Stay"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium",children:"Gradient"}),t.jsx("select",{name:"gradient",value:a.gradient,onChange:n,className:"w-full border px-3 py-2 rounded mt-1",children:g.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium",children:"Icon"}),t.jsx("select",{name:"icon",value:a.icon,onChange:n,className:"w-full border px-3 py-2 rounded mt-1",children:T.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsx("div",{className:"col-span-full",children:t.jsx("button",{type:"submit",className:`${r?"bg-yellow-500 hover:bg-yellow-600":"bg-blue-600 hover:bg-blue-700"} text-white px-6 py-2 rounded transition`,children:r?"Update Offer":"Create Offer"})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"ðŸ“‹ Existing Offers"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.slice(0,m).map(e=>t.jsxs("div",{className:`rounded-2xl text-white bg-gradient-to-r ${e.gradient} p-5 relative shadow-md`,children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("div",{className:"w-10 h-10 bg-white/30 rounded-full"}),t.jsx("span",{className:"bg-black px-3 py-1 text-sm rounded-full text-white font-semibold",children:e.discount})]}),t.jsx("h4",{className:"text-lg font-bold mt-4",children:e.title}),t.jsx("p",{className:"text-sm opacity-90",children:e.subtitle}),t.jsx("p",{className:"text-sm mt-1",children:e.description}),t.jsxs("p",{className:"text-xs mt-1",children:["Valid Till: ",new Date(e.validTill).toLocaleDateString()]}),t.jsxs("div",{className:"flex justify-between items-center bg-black p-2 mt-4 rounded-xl",children:[t.jsx("span",{className:"text-white px-2 py-1 border border-dashed rounded font-mono text-sm",children:e.code}),t.jsxs("button",{onClick:()=>C(e.code),className:"bg-white text-black px-3 py-1 rounded flex items-center gap-1 text-sm",children:[t.jsx(E,{size:16})," Copy"]})]}),t.jsxs("div",{className:"absolute top-2 left-2 flex gap-2",children:[t.jsx("button",{onClick:()=>w(e),className:"bg-white text-blue-600 px-2 py-1 rounded text-xs",children:"Edit"}),t.jsx("button",{onClick:()=>N(e._id),className:"bg-white text-red-600 px-2 py-1 rounded text-xs",children:"Delete"})]})]},e._id))}),o.length>6&&t.jsx("div",{className:"text-center mt-6",children:t.jsx("button",{onClick:()=>y(m===6?o.length:6),className:"text-blue-600 font-semibold underline",children:m===6?"Show More":"Show Less"})})]})]})};export{I as default};
